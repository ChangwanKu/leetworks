.libPaths()
.libPaths('e:/data/lib')
library(dplyr)
library(tidyr)
library(ggplot2)
a <- read.csv('e:/data/law/sex.csv')
head(a)
a1 <- a %>% filter(schoolindex == 1) %>% select(m14, w14, m15, w15, m16, w16, m17, w17)
a1
a2 <- gather(a1)
a2
a3 <- a2 %>% mutate(group=substr(key,1,1),year=substr(key,2,3))
a3
ggplot(a3,aes(x=year, y=value, fill = group)) + geom_bar(stat='identity', position = 'dodge')
p <- ggplot(a3,aes(x=year, y=value, fill = group)) + geom_bar(stat='identity', position = 'dodge')
p + scale_fill_brewer(palette = 'Blue')
p + scale_fill_brewer(palette = 'Red')
p + scale_fill_brewer(palette = 'Blues')
p + scale_fill_brewer(palette = 'Blues') + theme_minimal()
p + scale_fill_brewer(palette = 'Blues') + theme_light()
p + scale_fill_brewer(palette = 'Blues') + theme_void()
p + scale_fill_brewer(palette = 'Blues') + theme_linedraw()
p + scale_fill_brewer(palette = 'Blues') + theme_minimal()
p + scale_fill_brewer(palette = 'Blues') + theme_minimal() + theme(legend.position = 'bottom')
p + scale_fill_brewer(palette = 'Reds') + theme_minimal() + theme(legend.position = 'bottom')
getwd()
csv <- read_csv('./fromschool.csv')
library(dplyr)
library(tidyr)
library(ggplot2)
library(readr)
csv <- read_csv('./fromschool.csv')
csv <- read_csv('../fromschool.csv')
csv <- read_csv('fromschool.csv')
csv <- read_csv('/fromschool.csv')
csv <- read_csv('./fromschool.csv')
csv <- read_csv('./rawdatas/fromschool.csv')
str(csv)
csv2 <- csv %>% filter(schoolindex=='강원대') %>% group_by(school) %>%
mutate(sum = sum(y09, y10, y11, y12, y13, y14, y15, y16, y17)) %>% arrange(desc(sum)) %>% distinct(school,sum) %>%
head(5)
csv2 <- csv %>% filter(schoolindex=='강원대') %>% group_by(school) %>%
mutate(sum = sum(y09, y10, y11, y12, y13, y14, y15, y16, y17)) %>% arrange(desc(sum)) %>% distinct(school,sum) %>%
head(5)
head(csv)
csv2 <- csv %>% filter(schoolindex==1) %>% group_by(school) %>%
mutate(sum = sum(y09, y10, y11, y12, y13, y14, y15, y16, y17)) %>% arrange(desc(sum)) %>% distinct(school,sum) %>%
head(5)
csv2 <- csv %>% filter(schoolindex==1) %>% group_by(school) %>%
mutate(sum = sum(y9, y10, y11, y12, y13, y14, y15, y16, y17)) %>% arrange(desc(sum)) %>% distinct(school,sum) %>%
head(5)
csv2
sum(csv2)
sum(csv2.sum)
sum(csv2$sum)
csv3 <- csv %>% filter(schoolindex==1) %>% group_by(school) %>%
mutate(sum = sum(y9, y10, y11, y12, y13, y14, y15, y16, y17)) %>% arrange(desc(sum))
csv3
csv3 <- csv %>% filter(schoolindex==1) %>% group_by(school) %>%
mutate(sum = sum(y9, y10, y11, y12, y13, y14, y15, y16, y17)) %>% arrange(desc(sum)) %>% distinct(school,sum)
csv3
csv3 <- data.frame(school='etc',sum=sum(csv3$sum)-sum(csv2$sum))
csv3
sum(csv3$sum)
sum(csv2$sum)
csv3 <- csv %>% filter(schoolindex==1) %>% group_by(school) %>%
mutate(sum = sum(y9, y10, y11, y12, y13, y14, y15, y16, y17)) %>% arrange(desc(sum)) %>% distinct(school,sum)
csv4 <- data.frame(school='etc',sum=sum(csv3$sum)-sum(csv2$sum))
sum(csv3$sum)
csv3 <- data.frame(school='etc',sum=sum(csv3$sum)-sum(csv2$sum))
csv3
fromschool <- rbind(csv2,csv3)
fromschool
fromschool <- bind_rows(csv2,csv3)
fromschool
csv3 <- data.frame(school='기타',sum=sum(csv3$sum)-sum(csv2$sum))
fromschool <- bind_rows(csv2,csv3)
fromschool
str(fromschool)
bp <- ggplot(fromschool,aes(x='',y=sum,fill=school)) + geom_bar(width = 1, stat = 'identity')
bp
pie <- bp+coord_polar('y',start=0)
pie
fromschool
csv3
csv3 <- csv %>% filter(schoolindex==1) %>% group_by(school) %>%
mutate(sum = sum(y9, y10, y11, y12, y13, y14, y15, y16, y17)) %>% arrange(desc(sum)) %>% distinct(school,sum)
csv3 <- data.frame(school='기타',sum=sum(csv3$sum)-sum(csv2$sum))
csv3
fromschool <- bind_rows(csv2,csv3)
fromschool
x
bp <- ggplot(fromschool,aes(x='',y=sum,fill=school)) + geom_bar(width = 1, stat = 'identity')
bp
pie <- bp+coord_polar('y',start=0)
pie
pie + theme_minimal()
pie
a <- ''
a
pie
pie <- bp+coord_polar('x',start=0)
bp <- ggplot(fromschool,aes(x='',y=sum,fill=school)) + geom_bar(width = 1, stat = 'identity')
bp
pie <- bp+coord_polar('x',start=0)
pie
pie <- bp+coord_polar('y',start=0)
pie
pie + theme_void()
pie <- bp+coord_polar('y',start=1)
pie + theme_void()
pie <- bp+coord_polar('y',start=2)
pie + theme_void()
pie <- bp+coord_polar('y',start=.15)
pie <- bp+coord_polar('y',start=1.5)
pie + theme_void()
pie <- bp+coord_polar('y',start=1.3)
pie + theme_void()
pie <- bp+coord_polar('y',start=1.4)
pie + theme_void()
pie <- bp+coord_polar('y',start=0)
pie + theme_void()
library(dplyr)
library(tidyr)
getwd()
csv <- read.csv('./rawdatas/foreign.csv')
csv
csv
csv %>% rename(schoolindex = 癤퓋choolindex)
foreign <- csv %>% rename(schoolindex = 癤퓋choolindex) %>% filter(schoolindex == 1) %>% select(f14, f15, f16, f17)
foreign
foreign <- gather(foreign)
foreign
p <- ggplot(foreign,aes(key,value)) + geom_bar()
p
p <- ggplot(foreign,aes(key,value)) + geom_bar(stat='identity')
p
foreign <- csv %>% rename(schoolindex = 癤퓋choolindex) %>% filter(schoolindex == 2) %>% select(f14, f15, f16, f17)
foreign <- gather(foreign)
foreign
p <- ggplot(foreign,aes(key,value)) + geom_bar(stat='identity')
p
p <- ggplot(foreign,aes(key,value,key)) + geom_bar(stat='identity')
p
p <- ggplot(foreign,aes(key,value) + geom_bar(stat='identity')
p
p <- ggplot(foreign,aes(key,value)) + geom_bar(stat='identity')
p
foreign <- csv %>% rename(schoolindex = 癤퓋choolindex) %>% filter(schoolindex == 1) %>% select(f14, f15, f16, f17)
foreign <- gather(foreign)
foreign
p <- ggplot(foreign,aes(key,value)) + geom_bar(stat='identity')
p
p + theme_minimal()
fromschool <- bind_rows(csv2,csv3) %>% arrange(desc(sum))
fromschool
bp <- ggplot(fromschool,aes(x='',y=sum,fill=school)) + geom_bar(width = 1, stat = 'identity')
bp
pie <- bp+coord_polar('y',start=0)
pie + theme_void()
pie <- bp+coord_polar('y')
pie + theme_void()
bp <- ggplot(fromschool,aes(x='',y=sum,fill=school)) + geom_bar(width = 1, size = 1, color = 'white' stat = 'identity')
bp <- ggplot(fromschool,aes(x='',y=sum,fill=school)) + geom_bar(width = 1, size = 1, color = 'white', stat = 'identity')
bp
pie <- bp+coord_polar('y')
pie + theme_void()
pie + theme_void() + guides(fill = guide_legend(reverse = TRUE))
fromschool <- bind_rows(csv2,csv3)
bp <- ggplot(fromschool,aes(x='',y=sum,fill=school)) + geom_bar(width = 1, size = 1, color = 'white', stat = 'identity')
bp
pie <- bp+coord_polar('y')
pie + theme_void()
fromschool
fromschool <- bind_rows(csv2,csv3) %>% mutate(school=factor(school, levels = as.character(school)))
csv <- read_csv('./rawdatas/fromschool.csv')
csv2 <- csv %>% filter(schoolindex==1) %>% group_by(school) %>%
mutate(sum = sum(y9, y10, y11, y12, y13, y14, y15, y16, y17)) %>% arrange(desc(sum)) %>% distinct(school,sum) %>%
head(5)
csv3 <- csv %>% filter(schoolindex==1) %>% group_by(school) %>%
mutate(sum = sum(y9, y10, y11, y12, y13, y14, y15, y16, y17)) %>% arrange(desc(sum)) %>% distinct(school,sum)
csv3 <- data.frame(school='기타',sum=sum(csv3$sum)-sum(csv2$sum))
fromschool <- bind_rows(csv2,csv3) %>% mutate(school=factor(school, levels = as.character(school)))
fromschool <- bind_rows(csv2,csv3)
fromschool
str(fromschool)
csv <- read.csv('./rawdatas/fromschool.csv')
str(csv)
csv2 <- csv %>% filter(schoolindex==1) %>% group_by(school) %>%
mutate(sum = sum(y9, y10, y11, y12, y13, y14, y15, y16, y17)) %>% arrange(desc(sum)) %>% distinct(school,sum) %>%
head(5)
csv <- read_csv('./rawdatas/fromschool.csv')
str(csv)
csv2 <- csv %>% filter(schoolindex==1) %>% group_by(school) %>%
mutate(sum = sum(y9, y10, y11, y12, y13, y14, y15, y16, y17)) %>% arrange(desc(sum)) %>% distinct(school,sum) %>%
head(5)
csv3 <- csv %>% filter(schoolindex==1) %>% group_by(school) %>%
mutate(sum = sum(y9, y10, y11, y12, y13, y14, y15, y16, y17)) %>% arrange(desc(sum)) %>% distinct(school,sum)
csv3 <- data.frame(school='기타',sum=sum(csv3$sum)-sum(csv2$sum))
fromschool <- bind_rows(csv2,csv3)
fromschool$school <- factor(fromschool$school, levels = rev(as.character(fromschool$school)))
fromschool
pie + theme_void() + guides(fill = guide_legend(reverse = TRUE))
bp <- ggplot(fromschool,aes(x='',y=sum,fill=school)) + geom_bar(width = 1, size = 1, color = 'white', stat = 'identity')
bp
pie <- bp+coord_polar('y')
pie + theme_void() + guides(fill = guide_legend(reverse = TRUE))
pie + theme_void() #+ guides(fill = guide_legend(reverse = TRUE))
pie + theme_void() + guides(fill = guide_legend(reverse = TRUE))
fromschool
csv2 <- csv %>% filter(schoolindex==1) %>% group_by(school) %>%
mutate(sum = sum(y9, y10, y11, y12, y13, y14, y15, y16, y17)) %>% arrange(desc(sum)) %>% distinct(school,sum) %>%
top5 <- csv2 %>%  head(5)
csv2 <- csv %>% filter(schoolindex==1) %>% group_by(school) %>%
mutate(sum = sum(y9, y10, y11, y12, y13, y14, y15, y16, y17)) %>% arrange(desc(sum)) %>% distinct(school,sum)
top5 <- csv2 %>%  head(5)
top5
etc <- data.frame(school='기타',sum=sum(csv2$sum)-sum(top5$sum))
fromschool <- bind_rows(top5,etc)
fromschool
fromschool$school <- factor(fromschool$school, levels = rev(as.character(fromschool$school)))
bp <- ggplot(fromschool,aes(x='',y=sum,fill=school)) + geom_bar(width = 1, size = 1, color = 'white', stat = 'identity')
bp
pie <- bp+coord_polar('y')
pie + theme_void() + guides(fill = guide_legend(reverse = TRUE))
csv2
csv2[5:]
csv2[5:,]
csv2[5]
csv2[5,]
csv2[5:,]
csv2[:,]
csv2[5,]
csv2[5,0]
csv2[5,1]
csv2[5,2]
tally(csv2)
sum(tally(csv2)$n)
csv2 %>% tail(sum(tally(csv2)$n)-5)
library(dplyr)
library(tidyr)
library(ggplot2)
library(readr)
csv <- read_csv('./rawdatas/age.csv')
csv
csv <- read.csv('./rawdatas/age.csv')
csv
csv %>% modify_at(drop,~0)
colnames(csv)
csv %>% extract(drop,0)
csv %>% select(1)
csv %>% select(10:)
csv %>% select(10:,)
csv %>% select(ends_with(14))
csv %>% select(ends_with('14'))
csv %>% select(ends_with('14'),ends_with('15'),ends_with('16'),ends_with('17'))
csv <- csv %>% select(ends_with('14'),ends_with('15'),ends_with('16'),ends_with('17'))
gather(csv)
csv <- csv %>% select(schoolindex,ends_with('14'),ends_with('15'),ends_with('16'),ends_with('17'))
csv <- read.csv('./rawdatas/age.csv')
csv
csv2 <- csv %>% select(schoolindex,ends_with('14'),ends_with('15'),ends_with('16'),ends_with('17'))
csv2
csv2 <- csv %>% fliter(schoolindex == 1) %>% select(schoolindex,ends_with('14'),ends_with('15'),ends_with('16'),ends_with('17'))
csv2 <- csv %>% filter(schoolindex == 1) %>% select(schoolindex,ends_with('14'),ends_with('15'),ends_with('16'),ends_with('17'))
csv2
gather(csv)
gather(csv2)
csv2 %>% gather()
csv2 <- csv %>% filter(schoolindex == 1) %>% select(schoolindex,ends_with('14'),ends_with('15'),ends_with('16'),ends_with('17'))
csv2
csv3 <- csv2 %>% gather()
csv3
csv2 <- csv %>% filter(schoolindex == 1) %>% select(ends_with('14'),ends_with('15'),ends_with('16'),ends_with('17'))
csv2 <- csv %>% filter(schoolindex == 1) %>% select(ends_with('14'),ends_with('15'),ends_with('16'),ends_with('17')) %>% gather()
csv2
csv3 <- csv2 %>% mutate(group = substr(key,1,1),year = substr(key,2,3))
csv3
str(csv3)
csv3 %>% ggplot(aes(year,value,group)) + geom_bar()
csv3 %>% ggplot(aes(year,value,group)) + geom_line()
csv3 %>% ggplot(aes(year,value,fill=group)) + geom_line()
csv3 %>% ggplot(aes(year,value,group=group)) + geom_line()
csv3 %>% ggplot(aes(year,value,group=group,color=group)) + geom_line()
csv3 %>% ggplot(aes(year,value,color=group)) + geom_line()
group=group,
csv3 %>% ggplot(aes(year,value,group=group,color=group)) + geom_line()
csv3 %>% ggplot(aes(year,value,group=group,color=group)) + geom_line() + geom_point()
p <- csv3 %>% ggplot(aes(year,value,group=group,color=group)) + geom_line() + geom_point()
p
p + theme_classic()
source('~/GitHub/leetworks/age_rate_plot.R')
library(dplyr)
library(tidyr)
library(ggplot2)
library(readr)
csv <- read.csv('./rawdatas/age.csv')
csv2 <- csv %>% filter(schoolindex == 1) %>% select(ends_with('14'),ends_with('15'),ends_with('16'),ends_with('17')) %>% gather()
csv3 <- csv2 %>% mutate(group = substr(key,1,1),year = substr(key,2,3))
p <- csv3 %>% ggplot(aes(year,value,group=group,color=group)) + geom_line() + geom_point()
p + theme_classic()
p <- csv3 %>% ggplot(aes(year,value,group=group,color=group)) + geom_line() + geom_point() +geom_bar(stat = 'stack')
p <- csv3 %>% ggplot(aes(year,value,group=group,color=group)) + geom_bar()
p + theme_classic()
p <- csv3 %>% ggplot(aes(year,value,fill=group)) + geom_bar()
p + theme_classic()
p <- csv3 %>% ggplot(aes(year,value,fill=group)) + geom_bar(stat = 'identity')
p + theme_classic()
p + theme_classic() + theme_gray()
p + theme_minimal()
# csv open
a <- read_csv('e:/data/law/major.csv')
head(a)
str(a)
a1 <- a[1,]
a2 <- gather(a1)
a2
a3 <- a2 %>% filter(key == '법학' | key == '비법(문과)' | key == '비법(이과)')
p <- ggplot(a3,aes(x='',y=value,fill=key)) + geom_bar(width = 1, stat = 'identity')
pie <- p+coord_polar('y',start=0)
pie
a
a1 <- a[2,]
a2 <- gather(a1)
a2
a3 <- a2 %>% filter(key == '법학' | key == '비법(문과)' | key == '비법(이과)')
p <- ggplot(a3,aes(x='',y=value,fill=key)) + geom_bar(width = 1, stat = 'identity')
pie <- p+coord_polar('y',start=0)
pie
a1 <- a[3,]
a2 <- gather(a1)
a2
a3 <- a2 %>% filter(key == '법학' | key == '비법(문과)' | key == '비법(이과)')
p <- ggplot(a3,aes(x='',y=value,fill=key)) + geom_bar(width = 1, stat = 'identity')
pie <- p+coord_polar('y',start=0)
pie
a1 <- a[4,]
a2 <- gather(a1)
a2
a3 <- a2 %>% filter(key == '법학' | key == '비법(문과)' | key == '비법(이과)')
p <- ggplot(a3,aes(x='',y=value,fill=key)) + geom_bar(width = 1, stat = 'identity')
pie <- p+coord_polar('y',start=0)
pie
a1 <- a[5,]
a2 <- gather(a1)
a2
a3 <- a2 %>% filter(key == '법학' | key == '비법(문과)' | key == '비법(이과)')
p <- ggplot(a3,aes(x='',y=value,fill=key)) + geom_bar(width = 1, stat = 'identity')
pie <- p+coord_polar('y',start=0)
pie
# csv open
a <- read_csv('./rawdatas/major.csv')
# csv open
a <- read.csv('./rawdatas/major.csv')
# csv open
a <- read_csv('./rawdatas/major.csv')
head(a)
# csv open
csv <- read_csv('./rawdatas/major.csv')
# csv open
csv <- read.csv('./rawdatas/major.csv')
head(csv)
# csv open
csv <- read_csv('./rawdatas/major.csv')
head(csv)
major <- csv %>% filter(schoolindex == 1) %>%
select(law,human,nature)
major
major <- csv %>% filter(schoolindex == 1) %>%
select(law,human,nature) %>% gather()
major
p <- ggplot(major,aes(x='',y=value,fill=key)) + geom_bar(width = 1, stat = 'identity')
pie <- p+coord_polar('y',start=0)
pie
p <- ggplot(major,aes(x='',y=value,fill=key)) + geom_bar(width = 1, size =1, stat = 'identity')
pie <- p+coord_polar('y',start=0)
pie
pie <- p+coord_polar('y')
pie
major <- csv %>% filter(schoolindex == 2) %>%
select(law,human,nature) %>% gather()
major
p <- ggplot(major,aes(x='',y=value,fill=key)) + geom_bar(width = 1, size =1, stat = 'identity')
pie <- p+coord_polar('y')
pie
csv <- read.csv('./rawdatas/foreign.csv')
foreign <- csv %>% rename(schoolindex = 癤퓋choolindex) %>% filter(schoolindex == 1) %>% select(f14, f15, f16, f17)
foreign <- gather(foreign)
foreign
p <- ggplot(foreign,aes(key,value)) + geom_bar(stat='identity')
p + theme_minimal()
a <- read.csv('e:/data/law/sex.csv')
head(a)
a1 <- a %>% filter(schoolindex == 1) %>% select(m14, w14, m15, w15, m16, w16, m17, w17)
a1
a2 <- gather(a1)
a2
a3 <- a2 %>% mutate(group=substr(key,1,1),year=substr(key,2,3))
a3
p <- ggplot(a3,aes(x=year, y=value, fill = group)) + geom_bar(stat='identity', position = 'dodge')
p + scale_fill_brewer(palette = 'Reds') + theme_minimal() + theme(legend.position = 'bottom')
p + scale_fill_brewer(palette = 'Reds') + theme_minimal() + theme(legend.position = 'bottom', legend.title = element_blank())
p + scale_fill_brewer(palette = 'Reds') + theme_minimal() + theme(legend.position = 'bottom', legend.direction="horizontal", legend.title = element_blank())
p + scale_fill_brewer(palette = 'Reds') + theme_minimal() + theme(legend.position = 'bottom', legend.direction="horizontal", legend.title = element_blank()) +
scale_x_continuous(breaks=seq(2014,2017,1))
p + scale_fill_brewer(palette = 'Reds') + theme_minimal() + theme(legend.position = 'bottom', legend.direction="horizontal", legend.title = element_blank())
p + scale_fill_brewer(palette = 'Reds') + theme_void() + theme(legend.position = 'bottom', legend.direction="horizontal", legend.title = element_blank())
p + scale_fill_brewer(palette = 'Reds') + theme_minimal() + theme(legend.position = 'bottom', legend.direction="horizontal", legend.title = element_blank())
p + scale_fill_brewer(palette = 'Reds') + theme_minimal() + theme(legend.position = 'bottom', legend.direction="horizontal", legend.title = element_blank()) +
labs(x='Year')
p + scale_fill_brewer(palette = 'Reds') + theme_minimal() + theme(legend.position = 'bottom', legend.direction="horizontal", legend.title = element_blank()) +
labs(x='Year','Value') + ggtitle("Men & Women")
p + scale_fill_brewer(palette = 'Reds') + theme_minimal() + theme(legend.position = 'bottom', legend.direction="horizontal", legend.title = element_blank()) +
labs(x='Year','Value') + ggtitle("Men & Women") + theme_economist()
p + scale_fill_brewer(palette = 'Reds') + theme_minimal() + theme(legend.position = 'bottom', legend.direction="horizontal", legend.title = element_blank()) +
labs(x='Year','Value') + ggtitle("Men & Women") + theme(panel.background = element_blank())
csv <- read_csv('./rawdatas/fromschool.csv')
str(csv)
csv2 <- csv %>% filter(schoolindex==1) %>% group_by(school) %>%
mutate(sum = sum(y9, y10, y11, y12, y13, y14, y15, y16, y17)) %>% arrange(desc(sum)) %>% distinct(school,sum)
type(y9)
str(y9)
View(csv)
View(csv)
csv2 <- csv %>% filter(schoolindex==1) %>% group_by(school) %>%
mutate(sum = sum(starts_with('y'))) %>% arrange(desc(sum)) %>% distinct(school,sum)
csv2 <- csv %>% filter(schoolindex==1) %>% group_by(school) %>%
mutate(sum = sum(starts_with(y))) %>% arrange(desc(sum)) %>% distinct(school,sum)
csv2 <- csv %>% filter(schoolindex==1) %>% group_by(school) %>%
mutate(sum = sum(select(starts_with('y')))) %>% arrange(desc(sum)) %>% distinct(school,sum)
